<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Plotting options · AdaptiveDensityApproximation.jl</title><meta name="title" content="Plotting options · AdaptiveDensityApproximation.jl"/><meta property="og:title" content="Plotting options · AdaptiveDensityApproximation.jl"/><meta property="twitter:title" content="Plotting options · AdaptiveDensityApproximation.jl"/><meta name="description" content="Documentation for AdaptiveDensityApproximation.jl."/><meta property="og:description" content="Documentation for AdaptiveDensityApproximation.jl."/><meta property="twitter:description" content="Documentation for AdaptiveDensityApproximation.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="AdaptiveDensityApproximation.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">AdaptiveDensityApproximation.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">AdaptiveDensityApproximation</a></li><li><span class="tocitem">Plotting grids</span><ul><li><a class="tocitem" href="../plotting_basics/">Plotting basics</a></li><li class="is-active"><a class="tocitem" href>Plotting options</a><ul class="internal"><li><a class="tocitem" href="#Fill-colors"><span>Fill colors</span></a></li><li><a class="tocitem" href="#Line-colors"><span>Line colors</span></a></li><li><a class="tocitem" href="#OneDimGrid-bar-height"><span><code>OneDimGrid</code> bar height</span></a></li><li><a class="tocitem" href="#OneDimGrid-along-the-y-axis"><span><code>OneDimGrid</code> along the <code>y</code>-axis</span></a></li><li><a class="tocitem" href="#Colorbars"><span>Colorbars</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Plotting grids</a></li><li class="is-active"><a href>Plotting options</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Plotting options</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Translational-Pain-Research/AdaptiveDensityApproximation.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Translational-Pain-Research/AdaptiveDensityApproximation.jl/blob/main/docs/src/plotting_keywords.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Plotting-options"><a class="docs-heading-anchor" href="#Plotting-options">Plotting options</a><a id="Plotting-options-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting-options" title="Permalink"></a></h1><p>Most keywords from <code>Plots.jl</code> are supported. Furthermore, the following options can be used to change the appearance of gird plots (using the grids from <a href="../plotting_basics/#Plotting-grids">Plotting basics</a> for the examples):</p><h2 id="Fill-colors"><a class="docs-heading-anchor" href="#Fill-colors">Fill colors</a><a id="Fill-colors-1"></a><a class="docs-heading-anchor-permalink" href="#Fill-colors" title="Permalink"></a></h2><p>The fill color of each interval/block is determined from a color function that can be specified with the <code>fill_color_function</code> keyword. To illustrate the principle, consider the default color function:</p><pre><code class="language-julia hljs">function default_color_function(current_weight,grid_weights)
	# Get the weight range.
	min_w, max_w  = extrema(grid_weights)
	if min_w == max_w
		opacity = 1
	else
		# Calculate the proportion of the current_weight.
		opacity = (current_weight - min_w)/(max_w - min_w)
	end
	return (opacity,&quot;Midnight Blue&quot;)
end</code></pre><p>The color function will be applied internally to every interval/block and must accept two arguments: <code>(val,Arr)</code>, where <code>val</code> will be the weight of the current interval/block and where <code>Arr</code> will be the vector of all wights in the grid. The color function must return two arguments, an opacity (number between <code>0</code> and <code>1</code>) and a color <a href="https://docs.juliaplots.org/latest/colors/">compatible with <code>Plots.jl</code></a>.</p><p>As example, we can implement the color gradient <code>:thermal</code> form <a href="https://docs.juliaplots.org/latest/generated/colorschemes/"><code>ColorsSchemes.jl</code></a>:</p><pre><code class="language-julia hljs">using ColorSchemes

thermal = cgrad(:thermal)

function thermal_function(current_weight,grid_weights)
	min_w, max_w  = extrema(grid_weights)
	weight_proportion = (current_weight - min_w)/(max_w-min_w)
	return (1,thermal[weight_proportion])
end</code></pre><p>To apply the new color function, we set <code>fill_color_function = thermal_function</code> for the plotting:</p><pre><code class="language-julia hljs">plot(two_dim_grid, fill_color_function = thermal_function)</code></pre><img src="d1b7c4c9.svg" alt="Example block output"/><p>At the moment, there is no way to add automatically generated colorbars to the plot. As workaround, the colorbars can be created manually, e.g. as explained in <a href="#Colorbars">Colorbars</a></p><p>The color function can also be used for a <code>OneDimGrid</code>:</p><pre><code class="language-julia hljs">plot(one_dim_grid, fill_color_function = thermal_function)</code></pre><img src="6510ced8.svg" alt="Example block output"/><p>Since the bar height for <code>OneDimGrid</code>-plots already depicts the weight for each interval, a single fill color can be sufficient: </p><pre><code class="language-julia hljs">plot(one_dim_grid, fill_color_function = (w,W) -&gt; (1,&quot;Midnight Blue&quot;))</code></pre><img src="9c46a23e.svg" alt="Example block output"/><h2 id="Line-colors"><a class="docs-heading-anchor" href="#Line-colors">Line colors</a><a id="Line-colors-1"></a><a class="docs-heading-anchor-permalink" href="#Line-colors" title="Permalink"></a></h2><p>The color of the lines that separate the intervals/blocks can be changed with the <code>line_color_function</code> keyword. It works in the same way as <code>fill_color_function</code>:</p><pre><code class="language-julia hljs">plot(two_dim_grid, line_color_function = (w,W) -&gt;  (1,&quot;dark red&quot;))</code></pre><img src="4e1d1bd4.svg" alt="Example block output"/><pre><code class="language-julia hljs">plot(one_dim_grid, line_color_function = (w,W) -&gt;  (1,&quot;dark red&quot;))</code></pre><img src="1eb78391.svg" alt="Example block output"/><p>It is possible to pass the same function to both <code>line_color_function</code> and <code>fill_color_function</code>. This allows to hide the lines that separate the intervals/blocks. </p><pre><code class="language-julia hljs">plot(one_dim_grid, line_color_function = (w,W) -&gt; (1,&quot;Midnight Blue&quot;),
	fill_color_function = (w,W) -&gt; (1,&quot;Midnight Blue&quot;))</code></pre><img src="5e3a5ae8.svg" alt="Example block output"/><p>Since the intervals/blocks are plotted one after another, interval/block-specific line colors can lead to visual artifacts. This effect can be exaggerated with increased line widths and the <code>thermal_function</code> that was defined in <a href="#Fill-colors">Fill colors</a>:</p><pre><code class="language-julia hljs">plot(two_dim_grid,linewidth = 6, line_color_function = thermal_function,
	fill_color_function = thermal_function)</code></pre><img src="8cfb8ab6.svg" alt="Example block output"/><p>Reducing the line width, on the other hand, can fix the visual artifacts</p><pre><code class="language-julia hljs">plot(two_dim_grid, linewidth = 0.5, line_color_function = thermal_function,
	fill_color_function = thermal_function)</code></pre><img src="2c12aa6d.svg" alt="Example block output"/><h2 id="OneDimGrid-bar-height"><a class="docs-heading-anchor" href="#OneDimGrid-bar-height"><code>OneDimGrid</code> bar height</a><a id="OneDimGrid-bar-height-1"></a><a class="docs-heading-anchor-permalink" href="#OneDimGrid-bar-height" title="Permalink"></a></h2><p>The default plotting behavior for <code>OneDimGrid</code>-plots and <code>Grid</code>-plots differs, since one-dimensional grids can use the free <code>y</code>-axis to depict the weights of intervals. This behavior can be changed with the <code>height_function</code> that determines the bar-height, based on the weight of the corresponding interval. The default function is <code>x-&gt;x</code>, which produces bar heights equal to the respective interval weights.</p><p>To obtain <code>OneDimGrid</code>-plots that behave like <code>Grid</code>-plots, a constant height value needs to be set:</p><pre><code class="language-julia hljs">plot(one_dim_grid, height_function = x-&gt;1)</code></pre><img src="8dac9d09.svg" alt="Example block output"/><p>The <code>height_function</code> allows to separate the bar heights from the actual gird weights. For example, the absolute value can be plotted, but the true weight value can be used for the fill colors (using the <code>thermal_function</code> defined in <a href="#Fill-colors">Fill colors</a>):</p><pre><code class="language-julia hljs">plot(one_dim_grid, height_function = x-&gt;abs(x), fill_color_function = thermal_function)</code></pre><img src="a3ceaf16.svg" alt="Example block output"/><h2 id="OneDimGrid-along-the-y-axis"><a class="docs-heading-anchor" href="#OneDimGrid-along-the-y-axis"><code>OneDimGrid</code> along the <code>y</code>-axis</a><a id="OneDimGrid-along-the-y-axis-1"></a><a class="docs-heading-anchor-permalink" href="#OneDimGrid-along-the-y-axis" title="Permalink"></a></h2><p>A <code>OneDimGrid</code> can be plotted along the <code>y</code>-axis by setting <code>vertical=true</code>:</p><pre><code class="language-julia hljs">plot(one_dim_grid, vertical =true)</code></pre><img src="381dce84.svg" alt="Example block output"/><h2 id="Colorbars"><a class="docs-heading-anchor" href="#Colorbars">Colorbars</a><a id="Colorbars-1"></a><a class="docs-heading-anchor-permalink" href="#Colorbars" title="Permalink"></a></h2><p>Currently, there is no way to create automatic colorbars. As workaround, a colorbar can be created manually with a <code>OneDimGrid</code>-plot. For the example, we use the 2-dim example grid <code>two_dim_grid</code> and the <code>thermal_function</code> that was defined in <a href="#Fill-colors">Fill colors</a>.</p><p>First, we extract the weight range from <code>two_dim_grid</code>.</p><pre><code class="language-julia hljs">weight_range = extrema(export_weights(two_dim_grid))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(0.006819348298638676, 1.9931806517013615)</code></pre><p>Then, we create a new 1-dim grid <code>color_grid</code> that has <code>weight_range</code> as domain, and set up 100 intervals to get a continuous color bar:</p><pre><code class="language-julia hljs"># 101 discretization points -&gt; 100 intervals
color_grid = create_grid(LinRange(weight_range...,101))</code></pre><p>Next, we import 100 increasing, linearly spaced wights (e.g. <code>LinRange(0,1,100)</code>):</p><pre><code class="language-julia hljs">import_weights!(color_grid, LinRange(0,1,100))</code></pre><p>To plot the colorbar, we use the following options</p><ul><li><code>thermal_function</code> for <code>line_color_function</code> and <code>fill_color_function</code></li><li><code>height_function = x-&gt; 1</code> to obtain a bar</li><li><code>yaxis=false</code> to disable the <code>y</code>-axis.</li></ul><pre><code class="language-julia hljs">plot(color_grid, fill_color_function = thermal_function,
	line_color_function = thermal_function,
	height_function = x-&gt; 1, yaxis = false)</code></pre><img src="21fcb31c.svg" alt="Example block output"/><p>In this form, the colorbar is not very useful.  To plot the colorbar next to the <code>two_dim_grid</code> plot, we can use subplots and layouts:</p><pre><code class="language-julia hljs">p1 = plot(two_dim_grid, fill_color_function = thermal_function)
p2 = plot(color_grid, fill_color_function = thermal_function,
	line_color_function = thermal_function,
	height_function = x-&gt; 1, size = (600,50), yaxis = false)
plot(p1,p2, layout = @layout [a{0.9h}; b])</code></pre><img src="ccb102bb.svg" alt="Example block output"/><p>In the same way, a vertical colorbar can be created (using <a href="https://github.com/JuliaGraphics/Measures.jl"><code>Measures.jl</code></a> to adjust the margins):</p><pre><code class="language-julia hljs">using Measures
p1 = plot(two_dim_grid, fill_color_function = thermal_function)
p2 = plot(color_grid, fill_color_function = thermal_function,
	line_color_function = thermal_function,
	height_function = x-&gt; 1, vertical = true,
	xaxis = false, left_margin=5mm)
plot(p1,p2, layout = @layout [a{0.9w} b])</code></pre><img src="97b6c561.svg" alt="Example block output"/></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../plotting_basics/">« Plotting basics</a><a class="docs-footer-nextpage" href="../api/">API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Thursday 12 September 2024 18:01">Thursday 12 September 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
